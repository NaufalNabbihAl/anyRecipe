<x-layout>
    <nav class="w-full h-24 bg-gradient-to-r from-[#FD666D] to-[#FBBC05] drop-shadow-sm fixed ">
        <div class="w-full h-8 bg-[#FBBC05]"></div>
        <div class="flex px-6 lg:px-8 h-16">
            <div class="flex item-center -ms-4 md:ms-0 md:justify-center justify-between w-full">
                <a href="" class="text-white items-center mr-24 flex">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M14.0197 14.5572L18.4447 10.1322C18.6776 9.89804 18.8082 9.58123 18.8082 9.251C18.8082 8.92077 18.6776 8.60395 18.4447 8.36975C18.3285 8.25259 18.1903 8.15959 18.038 8.09613C17.8856 8.03267 17.7223 8 17.5572 8C17.3922 8 17.2289 8.03267 17.0765 8.09613C16.9242 8.15959 16.786 8.25259 16.6697 8.36975L11.3697 13.6697C11.2526 13.786 11.1596 13.9242 11.0961 14.0765C11.0327 14.2289 11 14.3922 11 14.5572C11 14.7223 11.0327 14.8856 11.0961 15.038C11.1596 15.1903 11.2526 15.3285 11.3697 15.4447L16.6697 20.8072C16.7865 20.9231 16.9251 21.0148 17.0774 21.077C17.2297 21.1392 17.3927 21.1707 17.5572 21.1698C17.7218 21.1707 17.8848 21.1392 18.0371 21.077C18.1894 21.0148 18.3279 20.9231 18.4447 20.8072C18.6776 20.573 18.8082 20.2562 18.8082 19.926C18.8082 19.5958 18.6776 19.279 18.4447 19.0447L14.0197 14.5572Z"
                            fill="white" />
                    </svg>
                    <p class="font-poppins font-normal">Cari Resep</p>
                </a>
            </div>
        </div>
        <div class="bg-white pt-2 pb-2">
            <form class="mx-4 ">
                <label for="default-search"
                    class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                <div class="relative">
                    <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                        <svg class="w-4 h-4 text-gray-500 dark:text-gray-300" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                        </svg>
                    </div>
                    <div class="flex">
                        <input type="search" id="default-search"
                            class="block h-12 w-72 p-1 ps-10 text-sm text-gray-900 border-none focus:border-transparent focus:outline-none focus:ring-0  rounded-md bg-gray-100 "
                            placeholder="Search Mockups, Logos..." required />
                        <div class="bg-gray-100 h-12 flex items-center rounded-md p-3 ms-2">
                            <svg id="fi_3024539" enable-background="new 0 0 189.524 189.524" height="24"
                                viewBox="0 0 189.524 189.524" width="24" xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <g>
                                        <path clip-rule="evenodd"
                                            d="m56.26 52.119c-2.104 8.174-9.524 14.214-18.355 14.214-10.467 0-18.952-8.485-18.952-18.952s8.485-18.952 18.952-18.952c8.831 0 16.251 6.04 18.355 14.214h128.526c2.616 0 4.738 2.121 4.738 4.738s-2.122 4.738-4.738 4.738zm-8.879-4.738c0 5.234-4.243 9.476-9.476 9.476s-9.476-4.243-9.476-9.476 4.243-9.476 9.476-9.476 9.476 4.242 9.476 9.476z"
                                            fill-rule="evenodd"></path>
                                    </g>
                                    <g>
                                        <path
                                            d="m4.738 52.119h14.811c-.39-1.514-.597-3.102-.597-4.738s.207-3.224.597-4.738h-14.811c-2.617 0-4.738 2.121-4.738 4.738s2.121 4.738 4.738 4.738z">
                                        </path>
                                    </g>
                                    <g>
                                        <path clip-rule="evenodd"
                                            d="m113.117 137.405c-2.104-8.174-9.525-14.214-18.355-14.214s-16.252 6.04-18.355 14.214h-71.669c-2.617 0-4.738 2.122-4.738 4.738s2.121 4.738 4.738 4.738h71.668c2.104 8.174 9.525 14.214 18.355 14.214s16.252-6.04 18.355-14.214h71.668c2.616 0 4.738-2.122 4.738-4.738s-2.122-4.738-4.738-4.738zm-18.355 14.214c5.234 0 9.476-4.242 9.476-9.476s-4.242-9.476-9.476-9.476-9.476 4.242-9.476 9.476 4.242 9.476 9.476 9.476z"
                                            fill-rule="evenodd"></path>
                                    </g>
                                    <g>
                                        <path clip-rule="evenodd"
                                            d="m169.974 90.024c-2.104-8.174-9.525-14.214-18.355-14.214s-16.252 6.04-18.355 14.214h-128.526c-2.617 0-4.738 2.122-4.738 4.738s2.121 4.738 4.738 4.738h128.526c2.104 8.174 9.525 14.214 18.355 14.214s16.252-6.04 18.355-14.214h14.811c2.616 0 4.738-2.122 4.738-4.738s-2.122-4.738-4.738-4.738zm-18.355 14.214c5.234 0 9.476-4.242 9.476-9.476s-4.243-9.476-9.476-9.476c-5.234 0-9.476 4.242-9.476 9.476s4.242 9.476 9.476 9.476z"
                                            fill-rule="evenodd"></path>
                                    </g>
                                </g>
                            </svg>
                            <p class="font-poppins font-thin text-base ms-1 text-gray-500">Filter</p>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </nav>
    <main class="pt-48 pb-40">
        <div class="mx-auto md:mt-2 lg:px-8 block max-w-md">
            @php
                $currentLetter = '';
            @endphp

            <form id="ingredient-form" method="GET" action="{{ route('user.selected') }}">
                @csrf
                @foreach ($ingredients as $ingredient)
                    @if (strtoupper($ingredient->name[0]) !== $currentLetter)
                        @php
                            $currentLetter = strtoupper($ingredient->name[0]);
                        @endphp

                        <div class="mx-4 mt-6">
                            <p class="font-poppins font-medium text-2xl">{{ $currentLetter }}</p>
                        </div>
                    @endif

                    <div class="mx-4 mt-6">
                        <div class="flex items-center mb-4 mt-5">
                            <label for="ingredient-checkbox-{{ $ingredient->id }}"
                                class="text-2xl w-full font-light text-gray-900">{{ $ingredient->name }}</label>
                            <input id="ingredient-checkbox-{{ $ingredient->id }}" type="checkbox" name="ingredients[]"
                                value="{{ $ingredient->id }}"
                                class="ingredient-checkbox w-4 h-4 text-black border-none rounded-full focus:ring-0">
                        </div>
                    </div>
                @endforeach

                <button type="submit"
                    class="flex w-auto  justify-center text-white bg-[#FBBC05] rounded-lg bg-gradient-to-r px-4  py-3  font-poppins font-normal leading-6 shadow-sm mt-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2">
                    Lanjutkan
                </button>
            </form>

        </div>
    </main>
    <div class="bg-white w-full h-28 fixed bottom-4">
        <div class="flex justify-between px-4">
            <div>
                <div class="flex  mt-2 items-center">
                    <svg fill="none" height="24" viewBox="0 0 24 24" width="24"
                        xmlns="http://www.w3.org/2000/svg" id="fi_9446643">
                        <g fill="rgb(0,0,0)">
                            <path
                                d="m12.75 11c0-.4142-.3358-.75-.75-.75s-.75.3358-.75.75v6c0 .4142.3358.75.75.75s.75-.3358.75-.75z">
                            </path>
                            <path clip-rule="evenodd"
                                d="m12 1.25c-5.93706 0-10.75 4.81294-10.75 10.75 0 5.9371 4.81294 10.75 10.75 10.75 5.9371 0 10.75-4.8129 10.75-10.75 0-5.93706-4.8129-10.75-10.75-10.75zm-9.25 10.75c0-5.10863 4.14137-9.25 9.25-9.25 5.1086 0 9.25 4.14137 9.25 9.25 0 5.1086-4.1414 9.25-9.25 9.25-5.10863 0-9.25-4.1414-9.25-9.25z"
                                fill-rule="evenodd"></path>
                            <path d="m13 8c0 .55228-.4477 1-1 1s-1-.44772-1-1 .4477-1 1-1 1 .44772 1 1z"></path>
                        </g>
                    </svg>
                    <p class="font-poppins font-light text-sm ms-2">Bahan Terpilih</p>
                </div>
                <p class="font-poppins font-medium text-xl ms-10" id="selected-count">0</p>
            </div>
            <div>
                <button type="submit" form="ingredient-form"
                    class="flex w-auto  justify-center text-white bg-[#FBBC05] rounded-lg bg-gradient-to-r px-4  py-3  font-poppins font-normal leading-6 shadow-sm mt-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2">
                    Lanjutkan
                </button>
            </div>
        </div>
    </div>
    <x-footer></x-footer>
    <script>
        const checkboxes = document.querySelectorAll('.ingredient-checkbox');
        const maxChecked = 5;

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                // Hitung ulang jumlah checkbox yang dicentang setiap kali ada perubahan
                let checkedCount = 0;
                checkboxes.forEach(cb => {
                    if (cb.checked) {
                        checkedCount++;
                    }
                });

                // Perbarui tampilan jumlah bahan terpilih
                document.getElementById('selected-count').textContent = checkedCount;

                // Nonaktifkan checkbox lain jika sudah 5 terpilih
                checkboxes.forEach(cb => {
                    if (!cb.checked) {
                        cb.disabled = checkedCount >= maxChecked;
                    }
                });
            });
        });
    </script>
</x-layout>
